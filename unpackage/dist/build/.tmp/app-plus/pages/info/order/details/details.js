(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/info/order/details/details"],{"4c6c":function(t,e,s){"use strict";s.r(e);var i=s("e7dd"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);e["default"]=a.a},5825:function(t,e,s){"use strict";s("a2e3");var i=n(s("b0ce")),a=n(s("64f6"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},"64f6":function(t,e,s){"use strict";s.r(e);var i=s("d949"),a=s("4c6c");for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);s("8798");var o=s("2877"),c=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},8798:function(t,e,s){"use strict";var i=s("9f76"),a=s.n(i);a.a},"9f76":function(t,e,s){},d949:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[s("HeadTtop",{attrs:{Title:t.Title,topsrc:t.topsrc,backshow:t.backshow,mpcomid:"4f14f412-0"}}),s("view",{staticClass:"address"},[s("view",{staticClass:"con"},[s("view",{staticClass:"info"},[s("text",{staticClass:"name"},[t._v(t._s(t.details.order_user_info.username))]),s("text",{staticClass:"tel"},[t._v(t._s(t.details.store.tel))])]),s("view",{staticClass:"region"},[s("image",{attrs:{src:"../../../../static/images/locationIcon.png",mode:""}}),t._v(t._s(t.details.order_user_info.address))])])]),s("view",{staticClass:"Spinfo"},[s("view",{staticClass:"Spinfotit"},[s("view",{staticClass:"Spinfoaddress"},[t._v(t._s(t.details.store.address))]),s("view",{staticClass:"type"},[1==t.details.status?s("text",[t._v("待付款")]):t._e(),2==t.details.status?s("text",[t._v("待取货")]):t._e(),3==t.details.status?s("text",[t._v("租赁中")]):t._e(),5==t.details.status?s("text",[t._v("已完成")]):t._e(),6==t.details.status?s("text",[t._v("已取消")]):t._e()])]),s("view",{staticClass:"details"},[s("view",{staticClass:"img"},[s("image",{attrs:{src:t.details.good.img_url,mode:""}})]),s("view",{staticClass:"text"},[t._v(t._s(t.details.good.goods_name))])])]),s("view",{staticClass:"orderinfo"},[s("view",{staticClass:"li"},[t._v("租赁时间："+t._s(t.details.start_time)+"-"+t._s(t.details.end_time))]),s("view",{staticClass:"li"},[t._v("租赁天数："+t._s(t.details.day)+"天")]),s("view",{staticClass:"li"},[t._v("租赁价格：￥"+t._s(t.details.good_price)+"/天")]),s("view",{staticClass:"li"},[t._v("押金：￥"+t._s(t.details.cash_pledge)+"元")])]),s("view",{staticClass:"orderBtn"},[s("text",{staticClass:"fl"},[s("text",[t._v("共需支付 :")]),s("text",{staticClass:"choice"},[t._v("￥"+t._s(t.details.amount)+"元")])]),s("view",{staticClass:"fr"},[1==t.details.status?s("view",{staticClass:"btn",attrs:{eventid:"4f14f412-0"},on:{tap:function(e){e.stopPropagation(),t.cancelOrder(t.details.id)}}},[t._v("取消订单")]):t._e(),2==t.details.status?s("view",{staticClass:"btn choice",attrs:{eventid:"4f14f412-1"},on:{tap:function(e){e.stopPropagation(),t.confirmOrder(t.details.id)}}},[t._v("确认收货")]):t._e(),1==t.details.status?s("view",{staticClass:"btn choice",attrs:{eventid:"4f14f412-2"},on:{tap:function(e){e.stopPropagation(),t.apppayOrder(t.details.id,t.details.amount)}}},[t._v("支付")]):t._e(),3==t.details.status?s("view",{staticClass:"btn choice",attrs:{eventid:"4f14f412-3"},on:{tap:function(e){e.stopPropagation(),t.finishOrder(t.details.id)}}},[t._v("还货")]):t._e()])])],1)},a=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return a})},e7dd:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(s("89bf"));function a(t){return t&&t.__esModule?t:{default:t}}var n={components:{HeadTtop:i.default},data:function(){return{Title:"我的订单",backshow:!0,topsrc:"../../../../static/images/back-w.png",order_id:"",details:[]}},onLoad:function(e){this.order_id=e.order_id,this.userinfo=t.getStorageSync("userinfo"),this.getData()},methods:{getData:function(){var e=this,s={order_id:this.order_id,_token:t.getStorageSync("userinfo")._token};this.$http.HttpRequst.request(!0,"order/orderDetail",s,"POST",function(t){200==t.code&&(e.details=t.data)})},cancelOrder:function(e){var s={order_id:e,_token:t.getStorageSync("userinfo")._token};this.$http.HttpRequst.request(!1,"user/cancelOrder",s,"POST",function(e){200==e.code&&t.showToast({title:"成功",duration:600,success:function(){setTimeout(function(e){t.navigateBack()},600)}})})},confirmOrder:function(e){var s={order_id:e,_token:t.getStorageSync("userinfo")._token};this.$http.HttpRequst.request(!1,"user/confirmOrder",s,"POST",function(e){200==e.code&&t.showToast({title:"成功",duration:600,success:function(){setTimeout(function(e){t.navigateBack()},600)}})})},finishOrder:function(e){var s={order_id:e,_token:t.getStorageSync("userinfo")._token};this.$http.HttpRequst.request(!1,"user/finishOrder",s,"POST",function(e){200==e.code&&t.showToast({title:"成功",duration:600,success:function(){setTimeout(function(e){t.navigateBack()},600)}})})},apppayOrder:function(e,s){var i=this,a={order_id:e,_token:t.getStorageSync("userinfo")._token};2==i.userinfo.is_vip?t.showActionSheet({itemList:["微信支付","支付宝支付"],success:function(e){0===e.tapIndex&&i.$http.HttpRequst.request(!0,"order/wxPay",a,"POST",function(e){console.log(JSON.stringify(e.data)),t.requestPayment({provider:"wxpay",orderInfo:e.data,success:function(e){t.showToast({title:"支付成功",icon:"success",duration:800,success:function(){setTimeout(function(t){i.getData()},800)}})},fail:function(e){t.showToast({title:"支付取消",icon:"success",duration:800})}})}),1===e.tapIndex&&i.$http.HttpRequst.request(!0,"alipay/pay",a,"POST",function(e){t.requestPayment({provider:"alipay",orderInfo:e,success:function(e){t.showToast({title:"支付成功",icon:"success",duration:800,success:function(){setTimeout(function(t){i.getData()},800)}})},fail:function(e){t.showToast({title:"支付取消",icon:"success",duration:800})}})})}}):t.showActionSheet({itemList:["余额支付"],success:function(e){0==e.tapIndex&&(t.getStorageSync("userinfo").balance<Number(s)?t.showToast({title:"余额不足，请充值",icon:"success",duration:600,success:function(){setTimeout(function(e){t.redirectTo({url:"/pages/info/interests/interests"})},600)}}):i.$http.HttpRequst.request(!1,"order/balancePay",a,"POST",function(e){200==e.code&&t.showToast({title:"成功",icon:"success",duration:600,success:function(){setTimeout(function(t){i.getData()},800)}})}))}})}}};e.default=n}).call(this,s("649d")["default"])}},[["5825","common/runtime","common/vendor"]]]);